(()=>{"use strict";var t,n,o=function(){function t(n,o,e){void 0===n&&(n=0),void 0===o&&(o=0),void 0===e&&(e=0);var i=this;this.x=0,this.y=0,this.z=0,this.mag=0,this.ux=0,this.uy=0,this.uz=0,this.angle=0,this.recalib=function(){i.mag=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)+Math.pow(i.z,2)),0==i.mag?(i.ux=0,i.uy=0,i.uz=0):(i.ux=i.x/i.mag,i.uy=i.y/i.mag,i.uz=i.z/i.mag),i.angle=Math.atan2(i.y,i.x)},this.add=function(t){i.x+=t.x,i.y+=t.y,i.z+=t.z,i.recalib()},this.sub=function(t){i.x-=t.x,i.y-=t.y,i.z-=t.z,i.recalib()},this.scalar=function(t){i.x*=t,i.y*=t,i.z*=t,i.recalib()},this.normalize=function(){0==i.mag?(i.x=0,i.y=0,i.z=0):(i.x=i.x/i.mag,i.y=i.y/i.mag,i.z=i.z/i.mag),i.recalib()},this.dot=function(t){return i.x*t.x+i.y*t.y},this.cross=function(t){return i.x*t.x-i.y*t.y},this.dist=function(t){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)+Math.pow(i.z-t.z,2))},this.setMag=function(t){i.normalize(),i.scalar(t)},this.rotate=function(t){var n=Math.sin(t),o=Math.cos(t);i.x=i.x*o-i.y*n,i.y=i.x*n+i.y*o},this.getNegative=function(){return new t(-i.x,-i.y,-i.z)},this.clone=function(){return new t(i.x,i.y,i.z)},this.x=n,this.y=o,this.z=e,this.recalib()}return t.randSIgned=function(n,o){return new t((Math.random()-.5)*o,(Math.random()-.5)*o,(Math.random()-.5)*o)},t.rand=function(n,o){return new t(Math.random()*o+n,Math.random()*o+n,Math.random()*o+n)},t.VecFromSub=function(n,o){return new t(o.x-n.x,o.y-n.y,o.z-n.z)},t.VecFromAdd=function(n,o){return new t(o.x+n.x,o.y+n.y,o.z+n.z)},t.getNormalized=function(n){return new t(n.x/n.mag,n.y/n.mag,n.z/n.mag)},t}(),e=function(){var t=this;this.addForce=function(t){},this.dist=function(n){return t.pos.dist(n.pos)},this.attract=function(n,e){void 0===e&&(e=.9);var i=o.VecFromSub(t.pos,n.pos);i.normalize(),i.scalar(e),t.addForce(i)},this.repel=function(n,e){void 0===e&&(e=.9);var i=o.VecFromSub(n.pos,t.pos);i.normalize(),i.scalar(e),t.addForce(i)},this.attractGravo=function(n){var e=o.VecFromSub(t.pos,n.pos),i=t.pos.dist(n.pos);i<t.size&&(i=t.size),e.normalize(),e.scalar(1e-4*t.mass*n.mass/i),t.addForce(e)},this.repelGravo=function(n){var e=o.VecFromAdd(t.pos,n.pos),i=t.pos.dist(n.pos);0==i&&(i=t.size),e.normalize(),e.scalar(.1*t.mass/Math.pow(i,2)),t.addForce(e)}},i=(t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)},function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}),a=function(t){function n(n){var e=t.call(this)||this;return e.addForce1=function(t){t.scalar(e.mass),e.forces.push(t)},e.addForce=function(t){e.acc.add(t)},e.update=function(){e.forces.length>0&&e.forces.forEach((function(t){e.acc.add(t)})),e.vel.add(e.acc),e.vel.scalar(.9),e.pos.add(e.vel),e.acc.scalar(0)},e.bound=function(t,n){void 0===n&&(n={x:!1,y:!1}),0==n.x?(e.pos.x<e.size&&(e.pos.x=e.size,e.vel.x=-e.vel.x),e.pos.x>t.width-e.size&&(e.pos.x=t.width-e.size,e.vel.x=-e.vel.x)):(e.pos.x<e.size&&(e.pos.x=t.width-e.size),e.pos.x>t.width-e.size&&(e.pos.x=e.size)),0==n.y?(e.pos.y<e.size&&(e.pos.y=e.size,e.vel.y=-e.vel.y),e.pos.y>t.height-e.size&&(e.pos.y=t.height-e.size,e.vel.y=-e.vel.y)):(e.pos.y<e.size&&(e.pos.y=t.height-e.size),e.pos.y>t.height-e.size&&(e.pos.y=e.size))},e.draw=function(t){t.circle({pos:e.pos,radius:e.size,fillColor:e.color})},e.drawVel=function(t){var n=o.VecFromAdd(e.pos,e.vel);n.scalar(1.1),t.line(e.pos,n)},e.drawExposureBubble=function(){},e.setColor=function(t){e.color=t},e.setSize=function(t){e.size=t},e.pos=n,e.vel=new o,e.acc=new o,e.size=10*Math.random()+2,e.mass=100*e.size,e.foe=10*e.size,e.color="rgb(".concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),",").concat(Math.floor(255*Math.random()),")"),e.forces=[],e}return i(n,t),n.random=function(t,e){return new n(o.rand(t,e))},n.generate=function(t,o,e){for(var i=[],a=0;a<t;a++)i.push(n.random(o,e));return i},n}(e),r=function(t,n,e){void 0===t&&(t=document.createElement("canvas")),void 0===n&&(n=300),void 0===e&&(e=300);var i=this;this.setSize=function(t,n){i.dom.width=t,i.dom.height=n,i.width=t,i.height=n},this.circle=function(t){var n=t.pos,e=void 0===n?new o(0,0):n,a=t.radius,r=void 0===a?5:a,s=t.fillColor,c=void 0===s?"red":s,h=t.strokeColor,l=void 0===h?"black":h,u=t.stroke,f=void 0!==u&&u,d=t.fill,p=void 0===d||d;i.ctx.beginPath(),i.ctx.fillStyle=c,i.ctx.strokeStyle=l,i.ctx.arc(e.x,e.y,r,0,2*Math.PI,!1),i.ctx.closePath(),p&&i.ctx.fill(),f&&i.ctx.stroke()},this.rect=function(t){var n=t.pos,e=void 0===n?new o(0,0):n,a=t.size,r=void 0===a?new o(100,100):a,s=t.fillColor,c=void 0===s?"red":s,h=t.strokeColor,l=void 0===h?"black":h,u=t.stroke,f=void 0!==u&&u,d=t.fill,p=void 0===d||d,v=t.angle,y=void 0===v?0:v;i.ctx.save(),i.ctx.rotate(y),i.ctx.beginPath(),i.ctx.fillStyle=c,i.ctx.strokeStyle=l,i.ctx.rect(e.x,e.y,r.x,r.y),i.ctx.closePath(),!0===p&&i.ctx.fill(),!0===f&&i.ctx.stroke(),i.ctx.restore()},this.line=function(t,n,o){void 0===o&&(o="rgba(0,0,0,0.5)"),i.ctx.beginPath(),i.ctx.strokeStyle=o,i.ctx.moveTo(t.x,t.y),i.ctx.lineTo(n.x,n.y),i.ctx.closePath(),i.ctx.stroke()},this.fillPath=function(t,n){void 0===n&&(n="red"),i.ctx.beginPath(),i.ctx.moveTo(t[0].x,t[0].y);for(var o=1;o<t.length;o++){var e=t[o];i.ctx.lineTo(e.x,e.y)}i.ctx.closePath(),i.ctx.fillStyle=n,i.ctx.fill()},this.clear=function(){i.ctx.clearRect(0,0,i.width,i.height)},this.fadeClear=function(){i.ctx.fillStyle="rgba(255,255,255,0.01)",i.ctx.rect(0,0,i.width,i.height),i.ctx.fill()},this.drawImage=function(t){i.ctx.drawImage(t,0,0,i.width,i.height)},this.getImageData=function(){return i.ctx.getImageData(0,0,i.width,i.height,{willReadFrequently:!0})},this.pixel=function(t,n){i.ctx.beginPath(),i.ctx.fillStyle="rgb(".concat(n.x,", ").concat(n.y,",").concat(n.z,")"),i.ctx.rect(t.x,t.y,1,1),i.ctx.closePath(),i.ctx.fill()},this.dom=t,this.dom.width=n,this.dom.height=e,this.ctx=this.dom.getContext("2d"),this.width=this.dom.width,this.height=this.dom.height},s=function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),c=(s((function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.fit=0,e.personality=2,e.init=function(t){if(void 0===t&&(t=null),e.path=[],null==t)for(var n=0;n<10;n++)e.path.push(o.randSIgned(-10,10));else e.path=t},e.makeChild=function(n,i){for(var a=[],r=0;r<e.path.length;r++)r<e.path.length/2?a.push(e.mutate(e.path[r])):a.push(e.mutate(n.path[r]));var s=new t(new o(10,i.height/2)),c=Math.random()>.5?e.color:n.color,h=Math.random()>.5?e.size:n.size;return s.color=c,s.size=h,Math.random()>.5&&(s.personality=e.personality-.1),s.init(a),s},e.mutate=function(t){return o.VecFromAdd(o.randSIgned(0,e.personality),t)},e.updateAgent=function(t){t>=e.path.length||e.addForce(e.path[t])},e.calculateFit=function(t){e.fit=e.pos.dist(t)},e.checkCollision=function(t){},e}),n=a),function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}()),h=function(t){function n(){var n=t.call(this)||this;return n.click=!1,n.mass=1,n.wheel=0,n.handleMove=function(t){n.pos.x=t.x,n.pos.y=t.y},n.handleClick=function(t){n.click=!0},n.handleDown=function(t){n.click=!0},n.handleUp=function(t){n.click=!1},n.move=function(t){n.pos.x=t.clientX-n.offset.x,n.pos.y=t.clientY-n.offset.y},n.setOffset=function(t){n.offset.x=t.left,n.offset.y=t.top},n.handleWheel=function(t){t.deltaY>0?n.wheel+=1:t.deltaY<0&&(n.wheel-=1)},n.pos=new o,n.offset=new o,n}return c(n,t),n}(e),l=function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}(),u=(function(t){l((function(n){var o=t.call(this)||this;return o.pos=n,o}),t)}(o),function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}()),f=(function(t){u((function(){var n=t.call(this)||this;return n.draw=function(t){},n}),t)}(e),new h);window.addEventListener("mousemove",f.move),function(){function t(n){void 0===n&&(n=document.body);var e=this;this.canvas=new r,this.data=[],this.amp=this.canvas.height/4,this.freq=3,this.waveLength=this.canvas.width/this.freq,this.origin=new o(this.canvas.width/2,this.canvas.height/2),this.scale=1,this.recalib=function(){e.amp=e.canvas.height/4,e.waveLength=e.canvas.width/e.freq},this.setOrigin=function(t){e.origin=t},this.setOriginToCenter=function(){e.origin=new o(e.canvas.width/2,e.canvas.height/2)},this.setFrequence=function(t){e.freq=t,e.recalib()},this.setScale=function(t){e.scale=t},this.plot=function(t){if(0==e.data.length)e.data=t().map((function(t,n){return new o(n,-t)}));else{var n=t();e.data=n.map((function(t,n){return new o(e.data[n].x,t+e.data[n].y)}))}},this.plotVector=function(t){e.data=t()},this.plotSquare=function(){for(var n=-Math.PI;n<Math.PI;n+=1/e.canvas.width){for(var i=0,a=0;a<20;a+=1)a%2!=0&&(i+=t.makeSin(e.amp/a,e.freq*a,n));e.data.push(new o(n*e.waveLength,e.canvas.height/2+i))}},this.plotCircle=function(){for(var n=[],i=-Math.PI;i<Math.PI;i+=.01)n.push(new o(t.makeCos(100,1,i),t.makeSin(100,1,i)));e.data=n},this.plotButterFly=function(){for(var n=[],i=-Math.PI;i<Math.PI;i+=.01)n.push(new o(170+t.makeCos(100,1,i)*(.5-t.makeCos(1,1,i)),t.makeSin(100,1,i)*(1-t.makeCos(1,1,i)))),n.push(new o(t.makeCos(-100,1,i)*(.5-t.makeCos(1,1,i))-170,t.makeSin(100,1,i)*(1-t.makeCos(1,1,i)))),n.push(new o(160+t.makeCos(90,1,i)*(.5-t.makeCos(1,1,i)),t.makeSin(90,1,i)*(1-t.makeCos(1,1,i)))),n.push(new o(t.makeCos(-90,1,i)*(.5-t.makeCos(1,1,i))-160,t.makeSin(90,1,i)*(1-t.makeCos(1,1,i)))),n.push(new o(-100+t.makeCos(10,1,i),-100+t.makeSin(10,1,i))),n.push(new o(100+t.makeCos(10,1,i),-100+t.makeSin(10,1,i))),n.push(new o(90+t.makeCos(30,1,i),70+t.makeSin(30,1,i))),n.push(new o(-90+t.makeCos(30,1,i),70+t.makeSin(30,1,i))),n.push(new o(t.makeCos(20,1,i),t.makeSin(100,1,i)));e.data=n},this.plotCardoid=function(){for(var n=[],i=-Math.PI;i<Math.PI;i+=.01)n.push(new o(t.makeCos(100,1,i)*(1-t.makeCos(1,1,i)),t.makeSin(100,1,i)*(1-t.makeCos(1,1,i))));e.data=n},this.drawGrid=function(){e.canvas.line(e.origin,new o(e.canvas.width,e.origin.y)),e.canvas.line(e.origin,new o(-e.canvas.width,e.origin.y)),e.canvas.line(e.origin,new o(e.origin.x,e.canvas.height)),e.canvas.line(e.origin,new o(e.origin.x,-e.canvas.height));for(var t=0;t<e.canvas.width/e.scale;t++)e.canvas.line(new o(t*e.scale*10,0),new o(t*e.scale*10,e.canvas.height),"rgba(0,0,0,0.1)"),e.canvas.line(new o(0,t*e.scale*10),new o(e.canvas.width,t*e.scale*10),"rgba(0,0,0,0.1)")},this.draw=function(){e.canvas.clear(),e.drawGrid(),e.data.forEach((function(t){e.canvas.circle({pos:new o(e.origin.x+t.x*e.scale,e.origin.y+t.y*e.scale),radius:1,fill:!0,fillColor:"red"})}))},this.animate=function(){e.draw(),requestAnimationFrame(e.animate)},this.app=function(){e.animate()},n.append(this.canvas.dom),this.canvas.setSize(500,500),this.setOriginToCenter(),this.recalib()}t.makeSin=function(t,n,o){return void 0===o&&(o=0),-t*Math.sin(n*o)},t.makeCos=function(t,n,o){return void 0===o&&(o=0),t*Math.cos(n*o)}}()})();